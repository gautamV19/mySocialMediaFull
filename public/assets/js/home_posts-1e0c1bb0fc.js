{class t{constructor(t){this.postId=t,this.postContainer=$(`#post-${t}`),this.newCommentForm=$(`#post-${t}-comments-form`),this.createComment(t);let e=this;$(" .delete-comment-button",this.postContainer).each((function(){e.deleteComment($(this))}))}createComment(t){let e=this;this.newCommentForm.submit((function(n){n.preventDefault();$.ajax({type:"post",url:"/comments/create",data:$(this).serialize(),success:function(n){console.log("comment create reply",n);let o=e.newCommentDom(n.data.comment);$(`#post-comments-${t}`).prepend(o),e.deleteComment($(" .delete-comment-button",o)),new Noty({theme:"relax",text:"Comment published!",type:"success",layout:"topRight",timeout:1500}).show(),$(`#post-${t}-comments-form>textarea`).val("")},error:function(t){console.log(t.responseText)}})}))}newCommentDom(t){return $(`<li id="comment-${t._id}">\n                      <p>\n                          \n                          <small>\n                              <a class="delete-comment-button" href="/comments/delete/${t._id}">X</a>\n                          </small>\n                          \n                          ${t.content}\n                          <br>\n                          <div class="likes">\n                            <span>0</span>\n                        \n                            <button class="commentLikeButton" id=${t._id}>Like</button>\n                          </div>\n                          <small>\n                              ${t.user.name}\n                          </small>\n                      </p>    \n\n              </li>`)}deleteComment(t){$(t).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){$(`#comment-${t.data.id}`).remove(),new Noty({theme:"relax",text:"Comment Deleted",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}})}))}}let e=function(){let e=$("#new-post-form");e.submit((function(s){s.preventDefault(),console.log("posting"),$.ajax({type:"post",url:"/posts/create",data:e.serialize(),success:function(e){console.log("post data",e);let s=n(e.data.post);$("#posts-list-container>ul").prepend(s),o($(" .delete-post-button",s)),new t(e.data.post._id),new Noty({theme:"relax",text:"Post published!",type:"success",layout:"topRight",timeout:1500}).show(),$("#new-post-form>textarea").val("")},error:function(t){console.log(t.responseText)}})}))},n=function(t){return $(`<li id="post-${t._id}">\n                  <p>\n                      \n                      <small>\n                          <a class="delete-post-button"  href="/posts/delete/${t._id}">X</a>\n                      </small>\n                     \n                      ${t.content}\n                      <br>\n                      <small>\n                      ${t.user.name}\n                      </small>\n                      <div class="likes">\n                      <span>0</span>\n                  \n                      <button class="postLikeButton" id=${t._id}>Like</button>\n                    </div>\n\n                  </p>\n                  <div class="post-comments">\n                      \n                          <form id="post-${t._id}-comments-form" action="/comments/create" method="POST">\n                              <input type="text" name="content" placeholder="Type Here to add comment..." required>\n                              <input type="hidden" name="post" value="${t._id}" >\n                              <input type="submit" value="Add Comment">\n                          </form>\n             \n              \n                      <div class="post-comments-list">\n                          <ul id="post-comments-${t._id}">\n                              \n                          </ul>\n                      </div>\n                  </div>\n                  \n              </li>`)},o=function(t){$(t).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){$(`#post-${t.data.post_id}`).remove(),new Noty({theme:"relax",text:"Post Deleted",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}})}))},s=function(){$("#posts-list-container>ul>li").each((function(){let e=$(this),n=$(" .delete-post-button",e);o(n);let s=e.prop("id").split("-")[1];new t(s)}))};e(),s()}$(".commentLikeButton").click((function(t){t.preventDefault(),console.log("comment liked",t.target.id),data={id:t.target.id,type:"Comment"},$.ajax({type:"post",url:"/likes/toggle",data:data,success:function(e){console.log(e);const n=`<span>${e.data.length}</span>\n      <button class="commentLikeButton" id="${t.target.id}">Like</button>`;$(`#comment-${t.target.id}>div.likes`).html(n)},error:function(t){console.log(t.responseText)}})})),$(".postLikeButton").click((function(t){t.preventDefault(),console.log("post liked",t.target.id),data={id:t.target.id,type:"Post"},$.ajax({type:"post",url:"/likes/toggle",data:data,success:function(e){console.log(e);const n=`<span>${e.data.length}</span>\n      <button class="postLikeButton" id="${t.target.id}">Like</button>`;$(`#post-${t.target.id}>div.likes`).html(n)},error:function(t){console.log(t.responseText)}})}));